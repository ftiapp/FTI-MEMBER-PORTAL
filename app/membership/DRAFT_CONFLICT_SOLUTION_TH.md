# ЁЯЫбя╕П р╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓ Draft Conflict - р╕кр╕гр╕╕р╕Ыр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ьр╕╣р╣Йр╕Юр╕▒р╕Тр╕Щр╕▓

## ЁЯУМ р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Др╕╕р╕Ур╕Юр╕Ъ

р╕Др╕╕р╕Ур╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╕Др╕гр╕▒р╕Ъ! р╕гр╕░р╕Ър╕Ър╕бр╕╡р╕Кр╣Ир╕нр╕Зр╣Вр╕лр╕зр╣Ир╕Чр╕╡р╣Ир╕нр╕▓р╕Ир╕Чр╕│р╣Гр╕лр╣Йр╣Ар╕Бр╕┤р╕Фр╕Ыр╕▒р╕Нр╕лр╕▓р╣Др╕Фр╣Й:

### р╕кр╕Цр╕▓р╕Щр╕Бр╕▓р╕гр╕Ур╣Мр╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╕Ыр╕▒р╕Нр╕лр╕▓:

```
1. User A р╕Бр╕гр╕нр╕Б Tax ID: 1234567890123 тЖТ р╣Ар╕гр╕┤р╣Ир╕бр╕Бр╕гр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕б
2. User B р╕Бр╕гр╕нр╕Б Tax ID: 1234567890123 (р╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щ) тЖТ р╣Ар╕гр╕┤р╣Ир╕бр╕Бр╕гр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕б
3. р╕Чр╕▒р╣Йр╕Зр╕Др╕╣р╣Ир╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕Фр╣Йр╕Ыр╕Бр╕Хр╕┤ (р╣Др╕бр╣Ир╕бр╕╡р╕нр╕░р╣Др╕гр╕Ър╕ер╣Зр╕нр╕Б)
4. User A р╕Бр╕Ф "Save Draft" тЖТ тЬЕ р╕кр╕│р╣Ар╕гр╣Зр╕И
5. User B р╕Бр╕Ф "Save Draft" тЖТ тЭМ Error: "Tax ID р╕Щр╕╡р╣Йр╕Цр╕╣р╕Бр╣Гр╕Кр╣Йр╣Бр╕ер╣Йр╕з"
6. User B р╣Ар╕кр╕╡р╕вр╣Ар╕зр╕ер╕▓р╕Бр╕гр╕нр╕Бр╣Др╕Ыр╣Ар╕Ыр╕ер╣Ир╕▓р╣Ж ЁЯШб
```

### р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╣Ар╕Бр╕┤р╕Фр╕Вр╕╢р╣Йр╕Щ:

- тЭМ **UX р╣Бр╕вр╣Ир╕бр╕▓р╕Б** - р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕кр╕╡р╕вр╣Ар╕зр╕ер╕▓р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Бр╕ер╣Йр╕зр╕Др╣Ир╕нр╕вр╕гр╕╣р╣Йр╕зр╣Ир╕▓р╣Гр╕Кр╣Йр╣Др╕бр╣Ир╣Др╕Фр╣Й
- тЭМ **Race Condition** - р╕Цр╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕Др╕╣р╣Ир╕Бр╕Ф Save р╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Щ р╕нр╕▓р╕Ир╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╕Ър╕Бр╕▒р╕Щ
- тЭМ **р╕кр╕▒р╕Ър╕кр╕Щ** - р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Др╕бр╣Ир╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕зр╣Ир╕▓р╕Чр╕│р╣Др╕бр╕Цр╕╢р╕Зр╣Гр╕Кр╣Йр╣Др╕бр╣Ир╣Др╕Фр╣Й

---

## тЬЕ р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╣Др╕Вр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╣Й

### р╣Бр╕Щр╕зр╕Др╕┤р╕Фр╕лр╕ер╕▒р╕Б: **Early Validation**

р╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╕Ир╕░р╕гр╕нр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Бр╕гр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕зр╕Др╣Ир╕нр╕вр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ  
тЖТ **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Чр╕▒р╕Щр╕Чр╕╡р╕Чр╕╡р╣Ир╕Бр╕гр╕нр╕Б Tax ID/ID Card**

### Flow р╣Гр╕лр╕бр╣И:

```
1. User р╕Бр╕гр╕нр╕Б Tax ID: 1234567890123
2. тЪб р╕гр╕░р╕Ър╕Ър╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Чр╕▒р╕Щр╕Чр╕╡ (< 1 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡)
3. р╕Цр╣Йр╕▓р╕бр╕╡р╕Др╕Щр╣Гр╕Кр╣Йр╣Бр╕ер╣Йр╕з тЖТ тЭМ р╣Бр╕кр╕Фр╕З error + р╕Ър╕ер╣Зр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╕Чр╕▒р╕Щр╕Чр╕╡
4. р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╣Гр╕Др╕гр╣Гр╕Кр╣Й тЖТ тЬЕ р╣Гр╕лр╣Йр╕Бр╕гр╕нр╕Бр╕Хр╣Ир╕нр╣Др╕Фр╣Й
```

### р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:

- тЬЕ р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕гр╕╣р╣Йр╕Чр╕▒р╕Щр╕Чр╕╡р╕зр╣Ир╕▓ Tax ID р╕Щр╕╡р╣Йр╣Гр╕Кр╣Йр╣Др╕Фр╣Йр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
- тЬЕ р╣Др╕бр╣Ир╣Ар╕кр╕╡р╕вр╣Ар╕зр╕ер╕▓р╕Бр╕гр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╣Ар╕Ыр╕ер╣Ир╕▓р╣Ж
- тЬЕ р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щ race condition р╣Др╕Фр╣Й

---

## ЁЯПЧя╕П р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╣Йр╕Др╕╕р╕У

### 1. API Endpoint р╣Гр╕лр╕бр╣И

**р╣Др╕Яр╕ер╣М:** `app/api/membership/check-draft-availability/route.js`

**р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И:** р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Tax ID/ID Card р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╣Др╕Фр╣Йр╕лр╕гр╕╖р╕нр╣Др╕бр╣И

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ 3 р╕нр╕вр╣Ир╕▓р╕З:**

1. тЬЕ р╕бр╕╡р╣Гр╕Щ Main Tables р╕лр╕гр╕╖р╕нр╣Др╕бр╣И (MemberRegist_XX_Main)
2. тЬЕ р╕бр╕╡р╣Гр╕Щ Draft Tables р╕лр╕гр╕╖р╕нр╣Др╕бр╣И (MemberRegist_XX_Draft)
3. тЬЕ р╕Цр╣Йр╕▓р╕бр╕╡ draft р╣Бр╕ер╣Йр╕з р╣Ар╕Ыр╣Зр╕Щр╕Вр╕нр╕З user р╕Др╕Щр╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щр╕лр╕гр╕╖р╕нр╣Ар╕Ыр╕ер╣Ир╕▓

**р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╣Др╕Ыр╣Др╕Фр╣Й:**

- тЬЕ **Available** - р╣Гр╕Кр╣Йр╣Др╕Фр╣Й р╕Бр╕гр╕нр╕Бр╣Ар╕ер╕в
- тД╣я╕П **Draft р╕Вр╕нр╕Зр╕Хр╕▒р╕зр╣Ар╕нр╕З** - р╕бр╕╡ draft р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з р╣Бр╕Бр╣Йр╣Др╕Вр╕Хр╣Ир╕нр╣Др╕Фр╣Й
- тЭМ **Draft р╕Вр╕нр╕Зр╕Др╕Щр╕нр╕╖р╣Ир╕Щ** - р╕бр╕╡р╕Др╕Щр╣Гр╕Кр╣Йр╣Бр╕ер╣Йр╕з р╣Гр╕Кр╣Йр╣Др╕бр╣Ир╣Др╕Фр╣Й
- тЭМ **р╕бр╕╡р╣Гр╕Щр╕гр╕░р╕Ър╕Ър╣Бр╕ер╣Йр╕з** - р╣Ар╕Ыр╣Зр╕Щр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╕лр╕гр╕╖р╕нр╕гр╕нр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕нр╕вр╕╣р╣И

---

### 2. Custom Hook

**р╣Др╕Яр╕ер╣М:** `app/membership/hooks/useDraftAvailability.js`

**р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И:** р╕Ир╕▒р╕Фр╕Бр╕▓р╕г logic р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ

**р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Й:**

```javascript
const {
  checkAvailability, // р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ
  isChecking, // р╕Бр╕│р╕ер╕▒р╕Зр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕нр╕вр╕╣р╣И
  availabilityStatus, // р╕Ьр╕ер╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ
  isBlocked, // р╕Др╕зр╕гр╕Ър╕ер╣Зр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
} = useDraftAvailability("ac");

// р╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Й
await checkAvailability("1234567890123");
```

---

### 3. UI Components

**р╣Др╕Яр╕ер╣М:** `app/membership/components/DraftAvailabilityChecker.js`

**р╕бр╕╡ 3 components:**

#### 3.1 `DraftAvailabilityIndicator`

р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:

- ЁЯФД р╕Бр╕│р╕ер╕▒р╕Зр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ...
- тЬЕ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╕лр╕бр╕▓р╕вр╣Ар╕ер╕Вр╕Щр╕╡р╣Йр╣Др╕Фр╣Й
- тД╣я╕П р╕Др╕╕р╕Ур╕бр╕╡р╕гр╣Ир╕▓р╕Зр╕Чр╕╡р╣Ир╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Др╕зр╣Йр╣Бр╕ер╣Йр╕з
- тЭМ р╕лр╕бр╕▓р╕вр╣Ар╕ер╕Вр╕Щр╕╡р╣Йр╕Цр╕╣р╕Бр╣Гр╕Кр╣Йр╣Бр╕ер╣Йр╕з

#### 3.2 `WithDraftAvailabilityCheck`

Wrapper р╕кр╕│р╕лр╕гр╕▒р╕Ъ input field р╣Ар╕Юр╕╖р╣Ир╕н auto-check

#### 3.3 `DraftAvailabilityBlocker`

Overlay р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ър╕ер╣Зр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╣Ар╕бр╕╖р╣Ир╕нр╣Гр╕Кр╣Йр╣Др╕бр╣Ир╣Др╕Фр╣Й

---

## ЁЯУЭ р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ (Integration)

### р╕кр╕│р╕лр╕гр╕▒р╕Ъ AC Form (р╣Бр╕ер╕░ OC, AM)

#### 1. р╣Ар╕Юр╕┤р╣Ир╕б imports

```javascript
import { useDraftAvailability } from "@/app/membership/hooks/useDraftAvailability";
import {
  DraftAvailabilityIndicator,
  DraftAvailabilityBlocker,
} from "@/app/membership/components/DraftAvailabilityChecker";
```

#### 2. р╣Ар╕Юр╕┤р╣Ир╕б hook

```javascript
const { checkAvailability, isChecking, availabilityStatus, isBlocked } = useDraftAvailability("ac"); // "ac", "oc", "am", р╕лр╕гр╕╖р╕н "ic"
```

#### 3. р╣Бр╕Бр╣Йр╣Др╕В handleTaxIdChange

```javascript
const handleTaxIdChange = async (e) => {
  const { value } = e.target;
  const numericValue = value.replace(/\D/g, "").slice(0, 13);

  setFormData((prev) => ({ ...prev, taxId: numericValue }));

  if (numericValue.length === 13) {
    setTimeout(async () => {
      // тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ draft availability р╕Бр╣Ир╕нр╕Щ
      const result = await checkAvailability(numericValue);

      // р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╣Др╕Фр╣Й р╣Гр╕лр╣Йр╕лр╕вр╕╕р╕Фр╣Ар╕ер╕в
      if (!result.available && result.reason !== "draft_exists_same_user") {
        return;
      }

      // р╕Цр╣Йр╕▓р╣Гр╕Кр╣Йр╣Др╕Фр╣Й р╣Гр╕лр╣Йр╕Чр╕│ validation р╕Хр╣Ир╕н
      const isValid = await checkTaxIdUniqueness(numericValue);
      if (isValid && isAutofill) {
        fetchCompanyInfo(numericValue);
      }
    }, 500);
  }
};
```

#### 4. р╣Ар╕Юр╕┤р╣Ир╕б indicator р╣Гр╕Щ JSX

```javascript
<input
  type="text"
  id="taxId"
  value={formData.taxId || ""}
  onChange={handleTaxIdChange}
  maxLength={13}
/>;

{
  /* тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕Хр╕гр╕Зр╕Щр╕╡р╣Й */
}
<DraftAvailabilityIndicator
  isChecking={isChecking}
  availabilityStatus={availabilityStatus}
  isBlocked={isBlocked}
/>;
```

#### 5. р╣Ар╕Юр╕┤р╣Ир╕б blocker р╕гр╕нр╕Ър╕Яр╕нр╕гр╣Мр╕б

```javascript
<DraftAvailabilityBlocker isBlocked={isBlocked}>
  <div className="form-content">{/* р╕Яр╕нр╕гр╣Мр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф */}</div>
</DraftAvailabilityBlocker>
```

#### 6. р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щ Save Draft р╣Ар╕бр╕╖р╣Ир╕н blocked

```javascript
const handleSaveDraft = async () => {
  if (isBlocked) {
    toast.error("р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕гр╣Ир╕▓р╕Зр╣Др╕Фр╣Й");
    return;
  }

  // ... save draft logic
};
```

---

## ЁЯОп р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### р╕Бр╣Ир╕нр╕Щр╣Бр╕Бр╣Йр╣Др╕В:

```
User р╕Бр╕гр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕б (10 р╕Щр╕▓р╕Чр╕╡) тЖТ р╕Бр╕Ф Save тЖТ тЭМ Error тЖТ ЁЯШб р╣Вр╕Бр╕гр╕Ш
```

### р╕лр╕ер╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕В:

```
User р╕Бр╕гр╕нр╕Б Tax ID тЖТ тЪб р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Чр╕▒р╕Щр╕Чр╕╡ тЖТ тЭМ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Чр╕▒р╕Щр╕Чр╕╡ тЖТ ЁЯШК р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ Tax ID р╣Гр╕лр╕бр╣И
```

---

## ЁЯУВ р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╣Й

1. тЬЕ `app/api/membership/check-draft-availability/route.js` - API endpoint
2. тЬЕ `app/membership/hooks/useDraftAvailability.js` - Custom hook
3. тЬЕ `app/membership/components/DraftAvailabilityChecker.js` - UI components
4. тЬЕ `app/membership/DRAFT_CONFLICT_PREVENTION.md` - р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕ар╕▓р╕йр╕▓р╕нр╕▒р╕Зр╕Бр╕др╕й
5. тЬЕ `app/membership/DRAFT_CONFLICT_SOLUTION_TH.md` - р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Щр╕╡р╣Й
6. тЬЕ `app/membership/ac/INTEGRATION_EXAMPLE.js` - р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

---

## ЁЯФН р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### Test Cases р╕Чр╕╡р╣Ир╕Др╕зр╕гр╕Чр╕Фр╕кр╕нр╕Ъ:

1. тЬЕ **Tax ID р╣Гр╕лр╕бр╣И** - р╕Др╕зр╕гр╣Бр╕кр╕Фр╕З "р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╣Др╕Фр╣Й"
2. тЬЕ **Tax ID р╕Вр╕нр╕Зр╕Хр╕▒р╕зр╣Ар╕нр╕З** - р╕Др╕зр╕гр╣Бр╕кр╕Фр╕З "р╕бр╕╡р╕гр╣Ир╕▓р╕Зр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з р╣Бр╕Бр╣Йр╣Др╕Вр╕Хр╣Ир╕нр╣Др╕Фр╣Й"
3. тЭМ **Tax ID р╕Вр╕нр╕Зр╕Др╕Щр╕нр╕╖р╣Ир╕Щ** - р╕Др╕зр╕гр╣Бр╕кр╕Фр╕З error + р╕Ър╕ер╣Зр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕б
4. тЭМ **Tax ID р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Бр╕ер╣Йр╕з** - р╕Др╕зр╕гр╣Бр╕кр╕Фр╕З error + р╕Ър╕ер╣Зр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕б
5. тЬЕ **Tax ID р╕Чр╕╡р╣Ир╣Ар╕Др╕вр╕Цр╕╣р╕Бр╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш** - р╕Др╕зр╕гр╣Бр╕кр╕Фр╕З "р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Гр╕Кр╣Йр╣Др╕Фр╣Й"

---

## ЁЯЪА р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Цр╕▒р╕Фр╣Др╕Ы

### р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Чр╕│:

1. ЁЯФз Integrate р╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Ъ AC Form (`CompanyBasicInfo.js`)
2. ЁЯФз Integrate р╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Ъ OC Form
3. ЁЯФз Integrate р╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Ъ AM Form
4. ЁЯФз Integrate р╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Ъ IC Form (р╣Гр╕Кр╣Й ID Card р╣Бр╕Чр╕Щ Tax ID)
5. ЁЯзк р╕Чр╕Фр╕кр╕нр╕Ър╕Чр╕╕р╕Б test cases
6. ЁЯУК Deploy р╣Бр╕ер╕░ monitor

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕г integrate:

р╕Фр╕╣р╣Др╕Фр╣Йр╕Чр╕╡р╣Ир╣Др╕Яр╕ер╣М `app/membership/ac/INTEGRATION_EXAMPLE.js`

---

## ЁЯТб р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕Др╕▒р╕Н

### р╕гр╕░р╕Ър╕Ър╕Щр╕╡р╣Йр╕Чр╕│р╕Зр╕▓р╕Щр╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Ъ validation р╣Ар╕Фр╕┤р╕б:

- тЬЕ р╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Бр╕Чр╕Щр╕Чр╕╡р╣И `checkTaxIdUniqueness` р╕Чр╕╡р╣Ир╕бр╕╡р╕нр╕вр╕╣р╣И
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕Кр╕▒р╣Йр╕Щр╕Бр╕▓р╕гр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б
- тЬЕ р╕Чр╕│р╕Зр╕▓р╕Щр╕Бр╣Ир╕нр╕Щ validation р╣Ар╕Фр╕┤р╕б

### р╕Вр╣Йр╕нр╕Фр╕╡:

- тЬЕ р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щ race condition
- тЬЕ UX р╕Фр╕╡р╕Вр╕╢р╣Йр╕Щр╕бр╕▓р╕Б
- тЬЕ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ
- тЬЕ р╣Др╕бр╣Ир╕Бр╕гр╕░р╕Чр╕Ъ code р╣Ар╕Фр╕┤р╕б

### р╕Вр╣Йр╕нр╕Др╕зр╕гр╕гр╕░р╕зр╕▒р╕З:

- тЪая╕П р╕Хр╣Йр╕нр╕З integrate р╕Чр╕╕р╕Бр╕Яр╕нр╕гр╣Мр╕б (AC, OC, AM, IC)
- тЪая╕П р╕Хр╣Йр╕нр╕Зр╕Чр╕Фр╕кр╕нр╕Ър╣Гр╕лр╣Йр╕Др╕гр╕Ър╕Чр╕╕р╕Б test case
- тЪая╕П р╕Хр╣Йр╕нр╕З handle loading state р╣Гр╕лр╣Йр╕Фр╕╡

---

## ЁЯдЭ р╕кр╕гр╕╕р╕Ы

р╕Др╕╕р╕Ур╕Юр╕╣р╕Фр╕Цр╕╣р╕Бр╕Др╕гр╕▒р╕Ъ! р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓ race condition р╕Ир╕гр╕┤р╕Зр╣Ж

р╕гр╕░р╕Ър╕Ър╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╣Йр╕Ир╕░р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓р╕Щр╕╡р╣Йр╣Вр╕Фр╕в:

1. тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Чр╕▒р╕Щр╕Чр╕╡р╕Чр╕╡р╣Ир╕Бр╕гр╕нр╕Б Tax ID
2. тЬЕ р╕Ър╕ер╣Зр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╕Чр╕▒р╕Щр╕Чр╕╡р╕Цр╣Йр╕▓р╣Гр╕Кр╣Йр╣Др╕бр╣Ир╣Др╕Фр╣Й
3. тЬЕ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ
4. тЬЕ р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╣Др╕бр╣Ир╣Гр╕лр╣Йр╣Ар╕кр╕╡р╕вр╣Ар╕зр╕ер╕▓р╕Бр╕гр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╣Ар╕Ыр╕ер╣Ир╕▓р╣Ж

**р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Бр╕ер╣Йр╕зр╕Др╕гр╕▒р╕Ъ!** р╣Ар╕Юр╕╡р╕вр╕Зр╣Бр╕Др╣И integrate р╣Ар╕Вр╣Йр╕▓р╕Бр╕▒р╕Ър╕Яр╕нр╕гр╣Мр╕бр╕Хр╕▓р╕бр╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣Ир╣Гр╕лр╣Йр╣Др╕Ы ЁЯЪА

---

**р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Фр╕в:** Cascade AI Assistant  
**р╕зр╕▒р╕Щр╕Чр╕╡р╣И:** 17 р╕Хр╕╕р╕ер╕▓р╕Др╕б 2025  
**р╕кр╕Цр╕▓р╕Щр╕░:** тЬЕ р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
